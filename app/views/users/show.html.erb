<% if @account.nil? && !@user.admin? && (can? :create, Account) %>
<div class="alert alert-warning" role="alert">
  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
  <span class="sr-only">Error:</span>
    <% if can? :create, Account %>Account info not found! <%= link_to raw("<button type='button' class='btn btn-warning'><span class='glyphicon glyphicon-plus' aria-hidden='true'></span> Add account info</button>"), :controller => 'accounts', :action => 'new', :user_id => @user.id %>
    <% end %>
</div>
<% end %>

<%= link_to raw("<button type='button' class='btn btn-primary'><span class='glyphicon glyphicon-arrow-left' aria-hidden='true'></span> Back</button>"), :action => 'index' %>

<h2>Personal info</h2>
<%= link_to raw("<button type='button' class='btn btn-default'><span class='glyphicon glyphicon-pencil' aria-hidden='true'></span> Edit</button>"), :action => 'edit', :id => @user.id %>

<table class="table">
    <tr>
        <th>Name</th>
        <td><%= @user.name %></td>
    </tr>
    <tr>
        <th>Username</th>
        <td><%= @user.username %></td>
    </tr>
    <tr>
        <th>Date of birth</th>
        <td><%= @user.birth_date %></td>
    </tr>
    <tr>
        <th>e-mail</th>
        <td><%= @user.e_mail %></td>
    </tr>
    <tr>
        <th>Role</th>
        <td><%= @user.role %></td>
    </tr>
</table>


<% if !@account.nil? && (can? :show, Account) %>

<h2>Billing info</h2>

<% if can? :edit, Account %>
<%= link_to raw("<button type='button' class='btn btn-default'><span class='glyphicon glyphicon-pencil' aria-hidden='true'></span> Edit</button>"), :controller => 'accounts', :action => 'edit', :id => @account.id, :user_id => @user.id %>
<% end %>

<table class="table">
    <tr>
        <th>Social security number</th>
        <td><%= @account.social_security %></td>
    </tr>
    <tr>
        <th>Phone number</th>
        <td><%= @account.phone_number %></td>
    </tr>
    <tr>
        <th>IBAN</th>
        <td><%= @account.iban %></td>
    </tr>
    <tr>
        <th>Swift</th>
        <td><%= @account.swift %></td>
    </tr>
    <tr>
        <th>Address</th>
        <td><%= @account.address %></td>
    </tr>
    <tr>
        <th>Postal code</th>
        <td><%= @account.postal_code %></td>
    </tr>
    <tr>
        <th>City</th>
        <td><%= @account.city %></td>
    </tr>
    <tr>
        <th>Project: </th>
        <td><%= @account.project.nil? ? "<em>Unallocated</em>".html_safe : @account.project %></td>
    </tr>
</table>

<% end %>